{% extends 'PHPDishWebBundle:User:view_common.html.twig' %}

{% set tab = 'post' %}

{% if posts.count %}
    {% block entry_meta %}
        <span>共发表了{{ posts.count }}篇文章</span>
    {% endblock %}
{% endif %}

{% block user_content %}
    <div class="panel-body">
        {% for post in posts %}
            <article class="post clearfix" role="article">
               {% set postUrl = path('post_view', {'id': post.id}) %}
               {% if post.cover %}
               <div class="entry-thumbnail">
                   <a href="{{ postUrl }}" title="{{ post.title }}">
                       <img src="{{ post.buildCover(400, 300) }}" style="display: inline;">
                   </a>
               </div>
               {% endif %}
               <header class="entry-header">
                   <h3 class="entry-title">
                       {%  if post.isRecommended %}<span class="sticky-tag">推荐</span>{% endif %}
                       <a href="{{ postUrl }}" rel="bookmark">
                           <span>{{ post.title }}</span>
                       </a>
                   </h3>
                   <div class="entry-meta">
                       <time class="entry-date num">{{ post.createdAt|date('Y-m-d') }}</time>
                       <a href="{{ postUrl }}#comments">{{ post.commentCount }}条评论</a>
                       <span>{{ post.viewCount }}次浏览</span>
                   </div>
               </header>
               <div class="entry-excerpt">{{ post.summary|striptags }}</div>
            </article>
        {% endfor %}
    </div>
    {% if posts.haveToPaginate %}
    <footer class="panel-footer">
        {{ pagerfanta(posts, 'twitter_bootstrap3') }}
    </footer>
    {% endif %}
{% endblock %}